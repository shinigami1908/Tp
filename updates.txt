def generate_manager_gpt_insights(manager_id: str):
    reports = build_manager_reports(manager_id)

    final_results = []

    for employee_report in reports:
        report_json = json.dumps([employee_report])  # only 1 employee
        prompt = MANAGER_INSIGHTS_USER_PROMPT_TEMPLATE.format(
            manager_id=manager_id,
            report_data=report_json
        )
        
        messages = [
            {"role": "system", "content": MANAGER_INSIGHTS_SYSTEM_PROMPT},
            {"role": "user", "content": prompt}
        ]

        response = chat_mgr.chat_complete(messages)
        cleaned = _extract_json_from_response(response)
        final_results.extend(cleaned)

    # save combined insights
    output_path = os.path.join(OUTPUT_DIR, f"manager_{manager_id}_insights.json")
    with open(output_path, "w") as f:
        json.dump(final_results, f, indent=2)

    return final_results
